#!/bin/bash
# Check for upstream changes and create state files if updates were pulled
set -e

REPO_DIR=/root/omarchy-pkgs
STATE_DIR=/root/.state

mkdir -p "$STATE_DIR"
cd "$REPO_DIR"

git fetch origin master --quiet

if [[ $(git rev-parse HEAD) != $(git rev-parse origin/master) ]]; then
  git pull --ff-only origin master
  touch "$STATE_DIR/.sync-needed-edge"
fi
